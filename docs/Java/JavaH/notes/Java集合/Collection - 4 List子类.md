---
title: List - 实现子类
date: 2020-07-02 17:00:00
categories: 
tags:
---
## ArrayList
**1. 基于动态数组实现**  

**2. 构造方法**  
- 无参构造：使用已经创建好的，长度为 0 的空数组，new Object[0]  
- 有参构造：创建指定容量大小数组，若参数为 0，则同无参构造
- 有参构造：参数为集合，则使用 Arrays.copyOf 复制创建数组

**3. 数组扩容**  
- 初始长度为 0，则默认扩容至大小为 10 的数组
- 否则，扩容为原来的 1.5 倍
- 扩容采用 Arrays.copyOf 复制操作完成，耗时且产生垃圾，因此最好能够事先确定容量

**4. 删除操作**
- 删除元素后，复制数组至新的位置填补空白，同时在末尾补上对应的 null（这样 GC 时可以删除）

**5. 序列化**
- ArrayList 中使用 transient 修饰数组，但是内部实现了 readObject 和 writeObject
- 目的在于，扩容操作会留下空白数组，如果直接序列化会浪费空间

## LinkedList
**1. 基于双向链表实现**  
- 存在一个静态内部类 Node，包含 next，prev 和 item 三个字段
- 存在指向链表首部和尾部的指针，便于操作：first 和 last

**2. 构造方法**  
- 不能指定初始容量，链表无需提前分配空间
- 有参构造：参数为集合，集合转为 Array，遍历数组，创建双向链表

**3. 核心方法 node(index)**    
- 该方法在集合中多次出现，获得下标对应的结点
- 优化：如果索引小于 size/2，从前向后遍历，否则，从后向前遍历




